// Function to fetch data from a specified URL
async function fetchData(url) {
  try {
      const response = await fetch(url);
      if (!response.ok) {
          throw new Error(`Error fetching data from ${url}`);
      }
      const data = await response.json();
      return data;
  } catch (error) {
      console.error(error);
      return [];
  }
}

// Function to populate a table with data
function populateTable(tableId, headers, data) {
  const table = document.getElementById(tableId).getElementsByTagName('tbody')[0];
  
  data.forEach(item => {
      const row = table.insertRow();
      headers.forEach(header => {
          const cell = row.insertCell();
          cell.textContent = item[header];
      });
  });

  // Hide the loading spinner
  const spinner = document.getElementById('loading-spinner');
  spinner.style.display = 'none';
}

// Function to populate the projects table
async function populateProjectsTable() {
  const headers = ['id', 'projectName', 'groupId', 'artifactId'];
  const projectsData = await fetchData('http://localhost:8080/projects');
  populateTable('projects-table', headers, projectsData);
}

// Call the function to populate the projects table
populateProjectsTable();